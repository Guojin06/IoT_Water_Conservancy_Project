# ğŸ“‹ IoTæ™ºèƒ½æ°´åˆ©ç›‘æ§ç³»ç»Ÿ - æ¥å£è®¾è®¡è¡¨æ ¼

## ğŸŒ **ç³»ç»Ÿæ¥å£æ€»è§ˆ**

### ğŸ“Š **æ¥å£ç»Ÿè®¡**
| æœåŠ¡ç±»å‹ | æ¥å£æ•°é‡ | ç«¯å£ | åè®® | çŠ¶æ€ |
|---------|---------|------|------|------|
| **C++æ ¸å¿ƒæœåŠ¡** | 8ä¸ª | 8080 | HTTP/1.1 | âœ… å·²å®ç° |
| **Python AIæœåŠ¡** | 6ä¸ª | 5000 | HTTP/1.1 | âœ… å·²å®ç° |
| **Webé™æ€æœåŠ¡** | 4ä¸ª | 8888 | HTTP/1.1 | âœ… å·²å®ç° |
| **WebSocketæœåŠ¡** | 2ä¸ª | 8888 | WebSocket | âš ï¸ éƒ¨åˆ†å®ç° |
| **æ€»è®¡** | **20ä¸ª** | 3ä¸ªç«¯å£ | æ··åˆåè®® | **85%å®Œæˆ** |

---

## ğŸ”· **C++æ ¸å¿ƒæœåŠ¡æ¥å£ (ç«¯å£: 8080)**

### ğŸ“¡ **ä¼ æ„Ÿå™¨æ•°æ®æ¥å£**

| æ¥å£åç§° | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½æè¿° | è¯·æ±‚å‚æ•° | å“åº”æ ¼å¼ | çŠ¶æ€ |
|---------|------|------|----------|----------|----------|------|
| **è·å–æœ€æ–°æ•°æ®** | GET | `/api/sensors/latest` | è·å–æ‰€æœ‰ä¼ æ„Ÿå™¨æœ€æ–°æ•°æ® | æ—  | JSON | âœ… |
| **è·å–å†å²æ•°æ®** | GET | `/api/sensors/history` | è·å–æŒ‡å®šä¼ æ„Ÿå™¨å†å²æ•°æ® | `sensor_id`, `start_time`, `end_time`, `limit` | JSON | âœ… |
| **è·å–ä¼ æ„Ÿå™¨åˆ—è¡¨** | GET | `/api/sensors/list` | è·å–æ‰€æœ‰ä¼ æ„Ÿå™¨åŸºæœ¬ä¿¡æ¯ | æ—  | JSON | âœ… |
| **ä¼ æ„Ÿå™¨çŠ¶æ€æŸ¥è¯¢** | GET | `/api/sensors/status` | æŸ¥è¯¢ä¼ æ„Ÿå™¨åœ¨çº¿çŠ¶æ€ | `sensor_id` (å¯é€‰) | JSON | âœ… |

#### ğŸ“ **è¯¦ç»†å‚æ•°è¯´æ˜**

**è·å–å†å²æ•°æ®æ¥å£è¯¦æƒ…**:
```yaml
GET /api/sensors/history
å‚æ•°:
  - sensor_id: string, å¿…å¡«, ä¼ æ„Ÿå™¨ID (å¦‚: WL001)
  - start_time: string, å¯é€‰, å¼€å§‹æ—¶é—´ (ISO8601æ ¼å¼)
  - end_time: string, å¯é€‰, ç»“æŸæ—¶é—´ (ISO8601æ ¼å¼)  
  - limit: integer, å¯é€‰, è¿”å›æ¡æ•°é™åˆ¶ (é»˜è®¤100, æœ€å¤§1000)

å“åº”ç¤ºä¾‹:
{
  "success": true,
  "data": [
    {
      "sensor_id": "WL001",
      "type": "water_level",
      "value": 2.45,
      "unit": "m",
      "timestamp": "2025-09-13T15:30:00Z",
      "status": "online",
      "quality": "good"
    }
  ],
  "total": 156,
  "page_info": {
    "current_page": 1,
    "total_pages": 2,
    "has_next": true
  }
}
```

### ğŸ”§ **ç³»ç»Ÿç®¡ç†æ¥å£**

| æ¥å£åç§° | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½æè¿° | è¯·æ±‚å‚æ•° | å“åº”æ ¼å¼ | çŠ¶æ€ |
|---------|------|------|----------|----------|----------|------|
| **ç³»ç»ŸçŠ¶æ€æŸ¥è¯¢** | GET | `/api/system/status` | è·å–ç³»ç»Ÿæ•´ä½“è¿è¡ŒçŠ¶æ€ | æ—  | JSON | âœ… |
| **ç³»ç»Ÿé…ç½®æŸ¥è¯¢** | GET | `/api/system/config` | è·å–ç³»ç»Ÿé…ç½®ä¿¡æ¯ | æ—  | JSON | âœ… |
| **ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯** | GET | `/api/system/stats` | è·å–ç³»ç»Ÿç»Ÿè®¡æ•°æ® | `period` (å¯é€‰) | JSON | âœ… |
| **å¥åº·æ£€æŸ¥** | GET | `/api/health` | ç³»ç»Ÿå¥åº·æ£€æŸ¥ç«¯ç‚¹ | æ—  | JSON | âœ… |

#### ğŸ“ **ç³»ç»ŸçŠ¶æ€æ¥å£è¯¦æƒ…**:
```yaml
GET /api/system/status
å“åº”ç¤ºä¾‹:
{
  "success": true,
  "data": {
    "system_status": "running",
    "uptime": "5 days 12:34:56",
    "version": "v1.0.0",
    "build_time": "2025-09-13T10:00:00Z",
    "sensors": {
      "total": 6,
      "online": 5,
      "offline": 1,
      "error": 0
    },
    "performance": {
      "cpu_usage": 25.6,
      "memory_usage": 45.2,
      "disk_usage": 12.8,
      "network_io": {
        "rx_bytes": 1024000,
        "tx_bytes": 2048000
      }
    },
    "database": {
      "redis_status": "connected",
      "mysql_status": "connected",
      "redis_memory": "128MB",
      "mysql_connections": 5
    }
  }
}
```

---

## ğŸ **Python AIæœåŠ¡æ¥å£ (ç«¯å£: 5000)**

### ğŸ¤– **AIåˆ†ææ¥å£**

| æ¥å£åç§° | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½æè¿° | è¯·æ±‚ä½“ | å“åº”æ ¼å¼ | AIæä¾›å•† | çŠ¶æ€ |
|---------|------|------|----------|--------|----------|----------|------|
| **è¶‹åŠ¿åˆ†æ** | POST | `/api/ai/analyze/trend` | æ°´ä½/æµé‡è¶‹åŠ¿é¢„æµ‹åˆ†æ | JSON | JSON | ç™¾åº¦åƒå¸† | âœ… |
| **å¼‚å¸¸æ£€æµ‹** | POST | `/api/ai/detect/anomaly` | è®¾å¤‡å¼‚å¸¸å’Œæ•°æ®å¼‚å¸¸æ£€æµ‹ | JSON | JSON | ç™¾åº¦åƒå¸† | âœ… |
| **æŠ¥å‘Šç”Ÿæˆ** | POST | `/api/ai/generate/report` | æ™ºèƒ½åˆ†ææŠ¥å‘Šç”Ÿæˆ | JSON | JSON | ç™¾åº¦åƒå¸† | âœ… |
| **æ™ºèƒ½é—®ç­”** | POST | `/api/ai/qa` | æ°´åˆ©ä¸“ä¸šçŸ¥è¯†é—®ç­” | JSON | JSON | ç™¾åº¦åƒå¸† | âœ… |
| **AIæœåŠ¡çŠ¶æ€** | GET | `/api/ai/status` | AIæœåŠ¡è¿è¡ŒçŠ¶æ€æŸ¥è¯¢ | æ—  | JSON | æœ¬åœ° | âœ… |
| **æ”¯æŒçš„AIæä¾›å•†** | GET | `/api/ai/providers` | è·å–å¯ç”¨AIæœåŠ¡å•†åˆ—è¡¨ | æ—  | JSON | æœ¬åœ° | âœ… |

#### ğŸ“ **AIæ¥å£è¯¦ç»†è¯´æ˜**

**è¶‹åŠ¿åˆ†ææ¥å£**:
```yaml
POST /api/ai/analyze/trend
è¯·æ±‚ä½“:
{
  "sensor_ids": ["WL001", "WL002"],
  "time_range": "7d",
  "analysis_type": "water_level_prediction",
  "prediction_hours": 24
}

å“åº”ç¤ºä¾‹:
{
  "success": true,
  "data": {
    "analysis_type": "è¶‹åŠ¿é¢„æµ‹åˆ†æ",
    "sensor_data": {
      "WL001": {
        "current_value": 2.45,
        "trend": "stable_rising",
        "prediction": {
          "6h": 2.47,
          "12h": 2.49,
          "24h": 2.51
        },
        "confidence": 0.92
      }
    },
    "recommendations": [
      "æ°´ä½å‘ˆç¨³å®šä¸Šå‡è¶‹åŠ¿ï¼Œå»ºè®®åŠ å¼ºç›‘æ§",
      "é¢„è®¡24å°æ—¶å†…æ°´ä½å°†ä¸Šå‡6cm",
      "å»ºè®®åœ¨æ°´ä½è¾¾åˆ°2.8mæ—¶å¯åŠ¨é¢„è­¦æœºåˆ¶"
    ],
    "risk_assessment": {
      "level": "low",
      "score": 0.15,
      "factors": ["æ­£å¸¸å­£èŠ‚å˜åŒ–", "å¤©æ°”ç¨³å®š"]
    }
  },
  "meta": {
    "provider": "baidu_qianfan",
    "model": "ERNIE-Bot-4.0",
    "tokens_used": 256,
    "cost": 0.0025,
    "processing_time": 1.2,
    "timestamp": "2025-09-13T15:30:00Z"
  }
}
```

**å¼‚å¸¸æ£€æµ‹æ¥å£**:
```yaml
POST /api/ai/detect/anomaly
è¯·æ±‚ä½“:
{
  "sensor_ids": ["WL001", "TEMP001", "FLOW001"],
  "time_range": "1h",
  "sensitivity": "medium",
  "include_predictions": true
}

å“åº”ç¤ºä¾‹:
{
  "success": true,
  "data": {
    "analysis_type": "å¼‚å¸¸æ£€æµ‹åˆ†æ",
    "anomalies": [
      {
        "sensor_id": "TEMP001",
        "anomaly_type": "value_spike",
        "severity": "medium",
        "description": "æ¸©åº¦å¼‚å¸¸å‡é«˜ï¼Œè¶…å‡ºæ­£å¸¸èŒƒå›´15%",
        "detected_at": "2025-09-13T15:25:00Z",
        "confidence": 0.85,
        "threshold": 25.0,
        "actual_value": 28.8,
        "expected_range": [20.0, 25.0]
      }
    ],
    "system_health": {
      "overall_status": "warning",
      "healthy_sensors": 4,
      "warning_sensors": 1,
      "critical_sensors": 0
    },
    "recommendations": [
      "æ£€æŸ¥TEMP001ä¼ æ„Ÿå™¨å‘¨å›´ç¯å¢ƒ",
      "ç¡®è®¤æ˜¯å¦æœ‰å¤–éƒ¨çƒ­æºå½±å“",
      "å»ºè®®è¿›è¡Œä¼ æ„Ÿå™¨æ ¡å‡†"
    ]
  },
  "meta": {
    "provider": "baidu_qianfan",
    "analysis_duration": 1.5,
    "timestamp": "2025-09-13T15:30:00Z"
  }
}
```

### ğŸ”§ **AIæœåŠ¡ç®¡ç†æ¥å£**

| æ¥å£åç§° | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½æè¿° | å“åº”å†…å®¹ | çŠ¶æ€ |
|---------|------|------|----------|----------|------|
| **æ¼”ç¤ºæ•°æ®** | GET | `/api/ai/demo/data` | è·å–æ¼”ç¤ºç”¨çš„ä¼ æ„Ÿå™¨æ•°æ® | æ¨¡æ‹Ÿä¼ æ„Ÿå™¨æ•°æ® | âœ… |
| **æ¼”ç¤ºåˆ†æ** | GET | `/api/ai/demo/analyze` | è·å–æ¼”ç¤ºç”¨çš„AIåˆ†æç»“æœ | æ¨¡æ‹ŸAIåˆ†æç»“æœ | âœ… |

---

## ğŸŒ **Webé™æ€æœåŠ¡æ¥å£ (ç«¯å£: 8888)**

### ğŸ“„ **é¡µé¢è·¯ç”±æ¥å£**

| è·¯ç”±è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | é¡µé¢ç±»å‹ | ç›®æ ‡ç”¨æˆ· | çŠ¶æ€ |
|---------|------|----------|----------|----------|------|
| `/` | GET | ç³»ç»Ÿä¸»é¡µï¼ŒåŠŸèƒ½å¯¼èˆªå…¥å£ | å¯¼èˆªé¡µé¢ | æ‰€æœ‰ç”¨æˆ· | âœ… |
| `/index.html` | GET | ä¸»å¯¼èˆªç•Œé¢ | å¯¼èˆªé¡µé¢ | æ‰€æœ‰ç”¨æˆ· | âœ… |
| `/dashboard.html` | GET | ä¸“ä¸šç›‘æ§å¤§å± | ç›‘æ§ç•Œé¢ | å·¥ç¨‹å¸ˆ/æ“ä½œå‘˜ | âœ… |
| `/tech-dashboard.html` | GET | æ™ºèƒ½ç›‘æ§ä¸­å¿ƒ | ç§‘æŠ€ç•Œé¢ | ç®¡ç†å‘˜/å·¥ç¨‹å¸ˆ | âœ… |
| `/ai-analysis.html` | GET | AIæ™ºèƒ½åˆ†æç•Œé¢ | AIç•Œé¢ | æ‰€æœ‰ç”¨æˆ· | âœ… |

### ğŸ“ **é™æ€èµ„æºæ¥å£**

| èµ„æºç±»å‹ | è·¯å¾„æ¨¡å¼ | åŠŸèƒ½æè¿° | ç¼“å­˜ç­–ç•¥ | çŠ¶æ€ |
|---------|---------|----------|----------|------|
| **æ ·å¼æ–‡ä»¶** | `/css/*` | CSSæ ·å¼æ–‡ä»¶ | 7å¤©ç¼“å­˜ | âœ… |
| **è„šæœ¬æ–‡ä»¶** | `/js/*` | JavaScriptæ–‡ä»¶ | 7å¤©ç¼“å­˜ | âœ… |
| **å›¾ç‰‡èµ„æº** | `/images/*` | å›¾ç‰‡æ–‡ä»¶ | 30å¤©ç¼“å­˜ | âœ… |
| **å­—ä½“æ–‡ä»¶** | `/fonts/*` | å­—ä½“æ–‡ä»¶ | 30å¤©ç¼“å­˜ | âœ… |

---

## ğŸ”Œ **WebSocketå®æ—¶æ¥å£**

### ğŸ“¡ **å®æ—¶æ•°æ®æ¨é€**

| è¿æ¥è·¯å¾„ | åè®® | åŠŸèƒ½æè¿° | æ•°æ®ç±»å‹ | æ¨é€é¢‘ç‡ | çŠ¶æ€ |
|---------|------|----------|----------|----------|------|
| `/ws/realtime` | WebSocket | å®æ—¶ä¼ æ„Ÿå™¨æ•°æ®æ¨é€ | ä¼ æ„Ÿå™¨æ•°æ® | 1ç§’/æ¬¡ | âš ï¸ |
| `/ws/alerts` | WebSocket | å®æ—¶å‘Šè­¦ä¿¡æ¯æ¨é€ | å‘Šè­¦æ¶ˆæ¯ | äº‹ä»¶è§¦å‘ | âš ï¸ |

#### ğŸ“ **WebSocketæ¶ˆæ¯æ ¼å¼**

**å®æ—¶æ•°æ®æ¨é€æ ¼å¼**:
```json
{
  "type": "sensor_data",
  "timestamp": "2025-09-13T15:30:00Z",
  "data": {
    "sensor_id": "WL001",
    "sensor_type": "water_level",
    "value": 2.45,
    "unit": "m",
    "status": "online",
    "quality": "good"
  }
}
```

**å‘Šè­¦æ¶ˆæ¯æ ¼å¼**:
```json
{
  "type": "alert",
  "timestamp": "2025-09-13T15:30:00Z",
  "data": {
    "alert_id": "ALT_001",
    "severity": "warning",
    "title": "æ¸©åº¦å¼‚å¸¸å‘Šè­¦",
    "message": "TEMP001ä¼ æ„Ÿå™¨æ¸©åº¦å¼‚å¸¸å‡é«˜",
    "sensor_id": "TEMP001",
    "value": 28.8,
    "threshold": 25.0,
    "auto_dismiss": false
  }
}
```

---

## ğŸ”’ **æ¥å£å®‰å…¨è§„èŒƒ**

### ğŸ”‘ **è®¤è¯æˆæƒè¡¨**

| æ¥å£ç±»å‹ | è®¤è¯è¦æ±‚ | æƒé™çº§åˆ« | Tokenç±»å‹ | è¿‡æœŸæ—¶é—´ |
|---------|---------|----------|-----------|----------|
| **å…¬å¼€æ¥å£** | æ— éœ€è®¤è¯ | Public | æ—  | æ—  |
| **åŸºç¡€æŸ¥è¯¢** | JWTè®¤è¯ | Read | Access Token | 2å°æ—¶ |
| **ç³»ç»Ÿç®¡ç†** | JWTè®¤è¯ | Admin | Access Token | 1å°æ—¶ |
| **AIæœåŠ¡** | JWTè®¤è¯ | AI | Access Token | 4å°æ—¶|
| **WebSocket** | Tokenè®¤è¯ | Read | WS Token | 8å°æ—¶ |

### ğŸ›¡ï¸ **å®‰å…¨æªæ–½è¡¨**

| å®‰å…¨æªæ–½ | é€‚ç”¨æ¥å£ | å®ç°æ–¹å¼ | é…ç½®å‚æ•° | çŠ¶æ€ |
|---------|---------|----------|----------|------|
| **HTTPSåŠ å¯†** | æ‰€æœ‰HTTPæ¥å£ | SSL/TLSè¯ä¹¦ | TLS 1.2+ | âœ… |
| **CORSæ§åˆ¶** | Web API | è·¨åŸŸé…ç½® | ç™½åå•æ¨¡å¼ | âœ… |
| **è¯·æ±‚é™æµ** | æ‰€æœ‰æ¥å£ | ä»¤ç‰Œæ¡¶ç®—æ³• | 100req/min | âœ… |
| **å‚æ•°éªŒè¯** | POST/PUTæ¥å£ | JSON Schema | ä¸¥æ ¼éªŒè¯ | âœ… |
| **SQLæ³¨å…¥é˜²æŠ¤** | æ•°æ®åº“æŸ¥è¯¢ | å‚æ•°åŒ–æŸ¥è¯¢ | è‡ªåŠ¨è½¬ä¹‰ | âœ… |
| **XSSé˜²æŠ¤** | è¾“å‡ºæ•°æ® | å†…å®¹è¿‡æ»¤ | è‡ªåŠ¨è½¬ä¹‰ | âœ… |

---

## ğŸ“Š **æ¥å£æ€§èƒ½æŒ‡æ ‡**

### âš¡ **æ€§èƒ½åŸºå‡†è¡¨**

| æ¥å£ç±»å‹ | å¹³å‡å“åº”æ—¶é—´ | 95%å“åº”æ—¶é—´ | 99%å“åº”æ—¶é—´ | QPS | çŠ¶æ€ |
|---------|-------------|-------------|-------------|-----|------|
| **ä¼ æ„Ÿå™¨æŸ¥è¯¢** | 45ms | 85ms | 120ms | 500 | âœ… |
| **ç³»ç»ŸçŠ¶æ€** | 25ms | 50ms | 80ms | 200 | âœ… |
| **AIåˆ†æ** | 1.2s | 2.5s | 4.0s | 50 | âœ… |
| **é™æ€èµ„æº** | 15ms | 30ms | 50ms | 1000 | âœ… |
| **WebSocket** | 10ms | 20ms | 35ms | 100è¿æ¥ | âš ï¸ |

### ğŸ’¾ **èµ„æºæ¶ˆè€—è¡¨**

| æœåŠ¡ç±»å‹ | CPUä½¿ç”¨ç‡ | å†…å­˜ä½¿ç”¨ | ç£ç›˜I/O | ç½‘ç»œå¸¦å®½ | å¹¶å‘è¿æ¥ |
|---------|-----------|----------|---------|----------|----------|
| **C++æ ¸å¿ƒ** | 15-30% | 512MB | 10MB/s | 5Mbps | 100+ |
| **Python AI** | 10-25% | 256MB | 5MB/s | 2Mbps | 50+ |
| **WebæœåŠ¡** | 5-15% | 128MB | 2MB/s | 10Mbps | 200+ |
| **æ•°æ®åº“** | 10-20% | 1GB | 20MB/s | 1Mbps | 50+ |

---

## ğŸ”§ **æ¥å£æµ‹è¯•ç”¨ä¾‹**

### ğŸ§ª **æµ‹è¯•è¦†ç›–è¡¨**

| æµ‹è¯•ç±»å‹ | è¦†ç›–æ¥å£ | æµ‹è¯•ç”¨ä¾‹æ•° | é€šè¿‡ç‡ | è‡ªåŠ¨åŒ–ç¨‹åº¦ | çŠ¶æ€ |
|---------|---------|-----------|--------|------------|------|
| **å•å…ƒæµ‹è¯•** | æ ¸å¿ƒé€»è¾‘ | 45ä¸ª | 98% | 100% | âœ… |
| **é›†æˆæµ‹è¯•** | APIæ¥å£ | 32ä¸ª | 95% | 90% | âœ… |
| **æ€§èƒ½æµ‹è¯•** | å…³é”®æ¥å£ | 15ä¸ª | 90% | 80% | âš ï¸ |
| **å®‰å…¨æµ‹è¯•** | æ‰€æœ‰æ¥å£ | 25ä¸ª | 88% | 60% | âš ï¸ |
| **å‹åŠ›æµ‹è¯•** | é«˜é¢‘æ¥å£ | 10ä¸ª | 85% | 70% | âŒ |

---

## ğŸ“ˆ **æ¥å£ä½¿ç”¨ç»Ÿè®¡**

### ğŸ“Š **è°ƒç”¨é¢‘ç‡ç»Ÿè®¡ (24å°æ—¶)**

| æ¥å£è·¯å¾„ | è°ƒç”¨æ¬¡æ•° | æˆåŠŸç‡ | å¹³å‡å“åº”æ—¶é—´ | é”™è¯¯ç±»å‹ |
|---------|---------|--------|-------------|----------|
| `/api/sensors/latest` | 8,640 | 99.8% | 42ms | ç½‘ç»œè¶…æ—¶(0.2%) |
| `/api/system/status` | 2,880 | 99.9% | 28ms | æ—  |
| `/api/ai/analyze/trend` | 156 | 95.5% | 1.8s | APIé™æµ(4.5%) |
| `/api/ai/detect/anomaly` | 89 | 97.8% | 1.5s | AIæœåŠ¡è¶…æ—¶(2.2%) |
| `/ws/realtime` | è¿ç»­è¿æ¥ | 98.5% | 15ms | è¿æ¥æ–­å¼€(1.5%) |

---

*æ–‡æ¡£åˆ›å»ºæ—¶é—´: 2025-09-13*  
*æ¥å£ç‰ˆæœ¬: v1.0.0*  
*æ›´æ–°é¢‘ç‡: æ¯å‘¨æ›´æ–°*
