# æ™ºèƒ½æ°´åˆ©ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Linux, macOS
- **Python**: 3.9+ 
- **æ•°æ®åº“**: MySQL 8.0+
- **ç¼“å­˜**: Redis 6.0+
- **æµè§ˆå™¨**: Chrome, Firefox, Safari (æ”¯æŒWebSocket)

### è‡ªåŠ¨éƒ¨ç½² (æ¨è)

#### Windows
```powershell
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Guojin06/IoT_Water_Conservancy_Project.git
cd IoT_Water_Conservancy_Project

# 2. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
.\deploy.ps1
```

#### Linux/macOS  
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Guojin06/IoT_Water_Conservancy_Project.git
cd IoT_Water_Conservancy_Project

# 2. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
chmod +x deploy.sh
./deploy.sh
```

## ğŸ”§ æ‰‹åŠ¨éƒ¨ç½²

### 1. ç¯å¢ƒå‡†å¤‡

#### å®‰è£…ä¾èµ–
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv ai_env

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Windows)
ai_env\Scripts\activate

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Linux/macOS)
source ai_env/bin/activate

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

#### æ•°æ®åº“è®¾ç½®
```bash
# å¯åŠ¨MySQLæœåŠ¡
# Windows: net start mysql
# Linux: sudo systemctl start mysql
# macOS: brew services start mysql

# åˆ›å»ºæ•°æ®åº“
mysql -u root -p < WaterConservancyIoT/create_database.sql
```

#### Redisè®¾ç½®
```bash
# å¯åŠ¨RedisæœåŠ¡
# Windows: ä¸‹è½½Redis for Windowså¹¶å¯åŠ¨
# Linux: sudo systemctl start redis
# macOS: brew services start redis
```

### 2. é…ç½®ç³»ç»Ÿ

#### æ•°æ®åº“è¿æ¥é…ç½®
ç¼–è¾‘ `WaterConservancyIoT/config.py`:
```python
# æ•°æ®åº“é…ç½®
MYSQL_CONFIG = {
    'host': 'localhost',
    'database': 'sensordatabase', 
    'user': 'root',
    'password': 'ä½ çš„MySQLå¯†ç '
}

# Redisé…ç½®
REDIS_CONFIG = {
    'host': 'localhost',
    'port': 6379,
    'decode_responses': True
}
```

### 3. å¯åŠ¨æœåŠ¡

#### ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
```bash
cd WaterConservancyIoT

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
python start_production.py
```

#### å¼€å‘ç¯å¢ƒå¯åŠ¨
```bash
# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ (Windows)
.\start_services.ps1

# æ–¹å¼2: æ‰‹åŠ¨å¯åŠ¨å„æœåŠ¡
# ç»ˆç«¯1: æ•°æ®ç”Ÿäº§è€…
python data_producer.py

# ç»ˆç«¯2: WebSocketæœåŠ¡å™¨  
python working_websocket.py

# ç»ˆç«¯3: HTTPæœåŠ¡å™¨
python simple_server.py
```

## ğŸŒ è®¿é—®ç³»ç»Ÿ

å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®:

- **ä¸»ç•Œé¢**: http://localhost:8888
- **ç³»ç»Ÿç®¡ç†**: http://localhost:8888/system-management.html
- **AIåˆ†æ**: http://localhost:8888/ai-analysis.html

**é»˜è®¤ç™»å½•è´¦æˆ·**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ•°æ®ç”Ÿäº§è€…    â”‚â”€â”€â”€â–¶â”‚      Redis      â”‚â”€â”€â”€â–¶â”‚  WebSocketæœåŠ¡  â”‚
â”‚ data_producer   â”‚    â”‚    (å®æ—¶ç¼“å­˜)   â”‚    â”‚ working_websocketâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                   â”‚
         â–¼                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MySQL      â”‚                               â”‚   å‰ç«¯ç•Œé¢      â”‚
â”‚   (æŒä¹…åŒ–å­˜å‚¨)  â”‚                               â”‚ (Vue.js + å›¾è¡¨)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                                                   â–²
         â”‚                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HTTPæœåŠ¡å™¨    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   ç”¨æˆ·æµè§ˆå™¨    â”‚
â”‚  simple_server  â”‚        RESTful API            â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”’ å®‰å…¨é…ç½®

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ£€æŸ¥
- [ ] ä¿®æ”¹é»˜è®¤æ•°æ®åº“å¯†ç 
- [ ] æ›´æ¢JWTå¯†é’¥ (`simple_server.py` ä¸­çš„ `JWT_SECRET_KEY`)
- [ ] é…ç½®é˜²ç«å¢™è§„åˆ™
- [ ] å¯ç”¨HTTPS (å¦‚éœ€è¦)
- [ ] å®šæœŸå¤‡ä»½æ•°æ®åº“

### ç«¯å£é…ç½®
- **HTTPæœåŠ¡**: 8888
- **WebSocketæœåŠ¡**: 8081  
- **MySQL**: 3306
- **Redis**: 6379

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
# Windows: sc query mysql
# Linux: sudo systemctl status mysql

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
mysql -u root -p -e "SHOW DATABASES LIKE 'sensordatabase';"
```

#### 2. Redisè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€
redis-cli ping  # åº”è¯¥è¿”å› PONG
```

#### 3. WebSocketè¿æ¥å¤±è´¥
- æ£€æŸ¥ç«¯å£8081æ˜¯å¦è¢«å ç”¨: `netstat -an | grep 8081`
- ç¡®è®¤é˜²ç«å¢™å…è®¸8081ç«¯å£
- æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„WebSocketè¿æ¥çŠ¶æ€

#### 4. å‰ç«¯æ•°æ®ä¸æ›´æ–°
- ç¡®è®¤æ‰€æœ‰ä¸‰ä¸ªæœåŠ¡éƒ½åœ¨è¿è¡Œ
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- éªŒè¯WebSocketè¿æ¥çŠ¶æ€(å³ä¸Šè§’æ˜¾ç¤º"å·²è¿æ¥")

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹æœåŠ¡è¿è¡Œæ—¥å¿—
tail -f logs/system.log

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
# MySQLæ—¥å¿—ä½ç½®å› ç³»ç»Ÿè€Œå¼‚
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å»ºè®®
1. **æ•°æ®åº“ä¼˜åŒ–**: åˆ›å»ºé€‚å½“çš„ç´¢å¼•ï¼Œå®šæœŸæ¸…ç†å†å²æ•°æ®
2. **Redisä¼˜åŒ–**: é…ç½®åˆé€‚çš„å†…å­˜é™åˆ¶å’Œè¿‡æœŸç­–ç•¥
3. **ç½‘ç»œä¼˜åŒ–**: ä½¿ç”¨CDNåŠ é€Ÿå‰ç«¯èµ„æº
4. **ç›‘æ§ç³»ç»Ÿ**: éƒ¨ç½²ç›‘æ§å‘Šè­¦ç³»ç»Ÿ

### æ‰©å±•éƒ¨ç½²
- **è´Ÿè½½å‡è¡¡**: ä½¿ç”¨Nginxåšåå‘ä»£ç†
- **å®¹å™¨åŒ–**: æä¾›Dockeréƒ¨ç½²æ–¹æ¡ˆ
- **é›†ç¾¤éƒ¨ç½²**: Redisé›†ç¾¤ï¼ŒMySQLä¸»ä»å¤åˆ¶

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤ç« èŠ‚
2. æ£€æŸ¥é¡¹ç›®GitHub Issues
3. æäº¤æ–°çš„Issueå¹¶é™„ä¸Šè¯¦ç»†é”™è¯¯ä¿¡æ¯

---
**æœ€åæ›´æ–°**: 2025-09-14  
**ç‰ˆæœ¬**: v1.0.0
